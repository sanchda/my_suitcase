#!/bin/bash
IT="$(wget -q -O - http://169.254.169.254/latest/meta-data/instance-type)"
declare -A instances
instances=(
["c5d.xlarge"]="0.192"
["c5.metal"]="4.08"
["m5a.2xlarge"]="0.344"
["c5.9xlarge"]="1.53"
["r5ad.xlarge"]="0.262"
["m5.24xlarge"]="4.608"
["i3en.12xlarge"]="5.424"
["m5d.12xlarge"]="2.712"
["c5.large"]="0.085"
["c5n.large"]="0.108"
["c5.24xlarge"]="4.08"
["i2.xlarge"]="0.853"
["t2.micro"]="0.0116"
["d2.8xlarge"]="5.52"
["i3en.3xlarge"]="1.356"
["z1d.3xlarge"]="1.116"
["m5.2xlarge"]="0.384"
["c5.18xlarge"]="3.06"
["x1e.16xlarge"]="13.344"
["i2.8xlarge"]="6.82"
["r5a.8xlarge"]="1.808"
["i2.2xlarge"]="1.705"
["i3en.2xlarge"]="0.904"
["m5a.xlarge"]="0.172"
["p3.2xlarge"]="3.06"
["t2.2xlarge"]="0.3712"
["h1.8xlarge"]="1.872"
["r5d.24xlarge"]="6.912"
["i3en.6xlarge"]="2.712"
["r4.8xlarge"]="2.128"
["t2.large"]="0.0928"
["x1.16xlarge"]="6.669"
["c5d.18xlarge"]="3.456"
["m5a.16xlarge"]="2.752"
["r5.metal"]="6.048"
["r5a.large"]="0.113"
["c3.large"]="0.105"
["r5a.24xlarge"]="5.424"
["g3.16xlarge"]="4.56"
["a1.2xlarge"]="0.204"
["c4.xlarge"]="0.199"
["x1e.4xlarge"]="3.336"
["m5ad.xlarge"]="0.206"
["i3en.24xlarge"]="10.848"
["c5n.18xlarge"]="3.888"
["m4.large"]="0.1"
["h1.4xlarge"]="0.936"
["x1e.xlarge"]="0.834"
["m5.large"]="0.096"
["c5.4xlarge"]="0.68"
["m5d.24xlarge"]="5.424"
["r3.large"]="0.166"
["c4.large"]="0.1"
["r5d.xlarge"]="0.288"
["m5d.large"]="0.113"
["r5.2xlarge"]="0.504"
["m3.2xlarge"]="0.532"
["m5d.2xlarge"]="0.452"
["m4.10xlarge"]="2"
["m5ad.large"]="0.103"
["c5d.large"]="0.096"
["r5d.metal"]="6.912"
["x1.32xlarge"]="13.338"
["c5n.2xlarge"]="0.432"
["m5d.xlarge"]="0.226"
["m5.metal"]="4.608"
["m5.12xlarge"]="2.304"
["p3.16xlarge"]="24.48"
["m3.large"]="0.133"
["c5d.4xlarge"]="0.768"
["r5.24xlarge"]="6.048"
["r4.large"]="0.133"
["r3.xlarge"]="0.333"
["x1e.32xlarge"]="26.688"
["c5n.xlarge"]="0.216"
["m5a.4xlarge"]="0.688"
["r5ad.2xlarge"]="0.524"
["t2.xlarge"]="0.1856"
["p3dn.24xlarge"]="31.212"
["p2.16xlarge"]="14.4"
["c3.8xlarge"]="1.68"
["m3.medium"]="0.067"
["x1e.2xlarge"]="1.668"
["m5a.8xlarge"]="1.376"
["m5ad.2xlarge"]="0.412"
["r5a.2xlarge"]="0.452"
["m5a.12xlarge"]="2.064"
["t2.small"]="0.023"
["m5d.16xlarge"]="3.616"
["d2.xlarge"]="0.69"
["c5.2xlarge"]="0.34"
["t3.medium"]="0.0416"
["m1.xlarge"]="0.35"
["c5d.2xlarge"]="0.384"
["m3.xlarge"]="0.266"
["m1.medium"]="0.087"
["t3a.medium"]="0.0376"
["r4.16xlarge"]="4.256"
["i3.xlarge"]="0.312"
["z1d.2xlarge"]="0.744"
["c3.xlarge"]="0.21"
["r5.8xlarge"]="2.016"
["c3.2xlarge"]="0.42"
["r3.2xlarge"]="0.665"
["r4.2xlarge"]="0.532"
["p2.8xlarge"]="7.2"
["m5.xlarge"]="0.192"
["c4.8xlarge"]="1.591"
["c5n.9xlarge"]="1.944"
["d2.2xlarge"]="1.38"
["d2.4xlarge"]="2.76"
["m5ad.4xlarge"]="0.824"
["c5.xlarge"]="0.17"
["m5d.4xlarge"]="0.904"
["r5.16xlarge"]="4.032"
["m4.xlarge"]="0.2"
["r5a.4xlarge"]="0.904"
["t3.xlarge"]="0.1664"
["z1d.12xlarge"]="4.464"
["m4.16xlarge"]="3.2"
["r5.12xlarge"]="3.024"
["m4.4xlarge"]="0.8"
["r4.xlarge"]="0.266"
["m1.small"]="0.044"
["a1.xlarge"]="0.102"
["z1d.6xlarge"]="2.232"
["r5d.4xlarge"]="1.152"
["r5a.16xlarge"]="3.616"
["p2.xlarge"]="0.9"
["c3.4xlarge"]="0.84"
["r4.4xlarge"]="1.064"
["r5a.xlarge"]="0.226"
["h1.2xlarge"]="0.468"
["m5ad.24xlarge"]="4.944"
["f1.4xlarge"]="3.3"
["i3en.xlarge"]="0.452"
["r5a.12xlarge"]="2.712"
["r5ad.24xlarge"]="6.288"
["m5d.metal"]="5.424"
["g2.2xlarge"]="0.65"
["c4.2xlarge"]="0.398"
["x1e.8xlarge"]="6.672"
["m5.4xlarge"]="0.768"
["h1.16xlarge"]="3.744"
["z1d.xlarge"]="0.372"
["r5d.8xlarge"]="2.304"
["t3.2xlarge"]="0.3328"
["g3.8xlarge"]="2.28"
["m5d.8xlarge"]="1.808"
["i3.metal"]="4.992"
["m5.16xlarge"]="3.072"
["m4.2xlarge"]="0.4"
["z1d.metal"]="4.464"
["r5ad.large"]="0.131"
["r5.4xlarge"]="1.008"
["r5d.2xlarge"]="0.576"
["r5.large"]="0.126"
["i3.large"]="0.156"
["z1d.large"]="0.186"
["i3.16xlarge"]="4.992"
["m5ad.12xlarge"]="2.472"
["i3en.large"]="0.226"
["i2.4xlarge"]="3.41"
["c5d.9xlarge"]="1.728"
["r5.xlarge"]="0.252"
["i3.2xlarge"]="0.624"
["r5d.large"]="0.144"
["g3.4xlarge"]="1.14"
["r5d.12xlarge"]="3.456"
["g2.8xlarge"]="2.6"
["i3.4xlarge"]="1.248"
["c5.12xlarge"]="2.04"
["c5n.4xlarge"]="0.864"
["t3a.small"]="0.0188"
["r3.4xlarge"]="1.33"
["m1.large"]="0.175"
["m2.4xlarge"]="0.98"
["r3.8xlarge"]="2.66"
["p3.8xlarge"]="12.24"
["m2.xlarge"]="0.245"
["c1.medium"]="0.13"
["cc2.8xlarge"]="2"
["t3a.2xlarge"]="0.3008"
["c1.xlarge"]="0.52"
["r5d.16xlarge"]="4.608"
["m5.8xlarge"]="1.536"
["m2.2xlarge"]="0.49"
["r5ad.4xlarge"]="1.048"
["t3a.nano"]="0.0047"
["r5ad.12xlarge"]="3.144"
["m5a.large"]="0.086"
["i3.8xlarge"]="2.496"
["cr1.8xlarge"]="3.5"
["m5a.24xlarge"]="4.128"
["c4.4xlarge"]="0.796"
["t3.small"]="0.0208"
["f1.16xlarge"]="13.2"
["t3.micro"]="0.0104"
["t3.large"]="0.0832"
["t3a.micro"]="0.0094"
["g3s.xlarge"]="0.75"
["a1.4xlarge"]="0.408"
["f1.2xlarge"]="1.65"
["a1.medium"]="0.0255"
["t2.medium"]="0.0464"
["a1.large"]="0.051"
["hs1.8xlarge"]="4.6"
["t3a.xlarge"]="0.1504"
["t1.micro"]="0.02"
["u_6tb1.metal"]="-1"
["t3.nano"]="0.0052"
["t2.nano"]="0.0058"
["t3a.large"]="0.0752"
["u_9tb1.metal"]="-1"
["u_12tb1.metal"]="-1")
uptime=$(awk '{print $1}' /proc/uptime)
cost=${instances[$IT]}
echo "$IT": '$'"$(echo "scale=2; "$cost'*'$uptime'/60.0/60.0' | bc)"